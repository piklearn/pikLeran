{% extends '_base.html' %}
{% load static %}

{% block title %}ุตูุญู ุงุตู{% endblock title %}

{% block main %}

<!-- ================= Courses Section ================= -->
<section class="py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="section-title mb-5 fw-bold">ุฏูุฑูโูุง ูุญุจูุจ</h2>
      <a href="#" class="btn btn-dark">ูุดุงูุฏู ููู</a>
    </div>

    <div class="row g-4">
      {% for course in carousel_courses %}
      <div class="col-lg-3 col-md-6">
        <div class="card course-card h-100 p-3">
          <a href="{{ course.get_absolute_url }}" class="text-decoration-none text-dark">
            <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}" class="w-100 mb-3 course-img">
            <h6 class="fw-bold">{{ course.title }}</h6>
            <div class="d-flex align-items-center justify-content-between mb-2 small">
              <div class="text-warning fw-semibold">
                โญ 4.8
              </div>
              <div class="text-muted">
                ๐ฅ 1200 ุฏุงูุดุฌู
              </div>
            </div>

            <div class="text-muted small mb-2">
              ูุฏุฑุณ: {{ course.instructor }}
            </div>

            <div class="text-muted small mb-3">
              ูุฏุช ุฒูุงู: {{ course.duration }}
            </div>

            <hr>

            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="price">
                    {% if course.price == 0 %}
                            ุฑุงฺฏุงู
                            {% else %}
                            {{ course.price|floatformat }} ุชููุงู
                            {% endif %}
              </div>
              <span class="badge bg-info rounded-pill px-3 py-2">
                ุดุฑูุน
              </span>
            </div>
          </a>
        </div>
      </div>
      {% endfor %}
      
    </div>
  </div>
</section>

<!-- ================= Hero Section ================= -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      
      <div class="col-md-6">
        <h1 class="fw-bold mb-3">
          ุงุฏฺฏุฑ ุฑุง <span class="text-info">ุญุฑููโุง</span> ุดุฑูุน ฺฉู
        </h1>
        <p class="text-muted mb-4">
          ุจุง ุฏูุฑูโูุง ฺฉุงุฑุจุฑุฏ ู ูพุฑูฺูโูุญูุฑ ููุงุฑุชโูุงุช ุฑู ุงุฑุชูุง ุจุฏู ู ุณุฑุน ูุงุฑุฏ
          ุจุงุฒุงุฑ ฺฉุงุฑ ุดู.
        </p>
        <a href="#" class="btn btn-info px-4 py-2"> ุดุฑูุน ุงุฏฺฏุฑ </a>
      </div>
      <div class="col-md-6 mb-4 mb-md-0">
        <img src="/static/assets/Muslim%20graduation-cuate.png" class="img-fluid" alt="Hero">
      </div>
    </div>
  </div>
</section>

<!-- Articles Section -->
<section>
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="section-title mb-5 fw-bold">ุฌุฏุฏุชุฑู ููุงูู ูุง</h2>
  <a href="#" class="btn btn-dark">ูุดุงูุฏู ููู</a>
</div>
<div class="row g-4">

  <!-- Article 1 -->
  <div class="col-lg-3 col-md-6">

    <div class="card article-card h-100 p-3 bg-white">
      <a href="#" class="text-decoration-none text-dark">
        <img src="https://thumbs.dreamstime.com/z/dumbbell-rack-close-up-gym-sport-150444617.jpg?ct=jpeg" class="w-100 mb-3 article-img">

        <div class="d-flex justify-content-between small mb-2">
          <div class="text-muted">๐ ฑฐ ุฎุฑุฏุงุฏ ฑดฐต</div>
          <div class="text-success">ุงูฺฏูุฑุชู</div>
        </div>

        <h6 class="fw-bold">ุชุญูู ุงูฺฏูุฑุชู Randomized SAT</h6>

        <div class="text-muted small mb-3">
          ุจุฑุฑุณ ฺฉุงูู ุงูฺฏูุฑุชูโูุง ุชุตุงุฏู ุจุฑุง ุญู ูุณุงุฆู NP-Complete ู ุชุญูู ุงุญุชูุงู ููููุช ุขูโูุง.
        </div>

        <hr>

        <div class="d-flex justify-content-between align-items-center">
          <div class="text-muted small">โฑ ฑฒ ุฏููู</div>
          <span class="badge bg-info rounded-pill px-3 py-2">ูุทุงูุนู</span>
        </div>
      </a>
    </div>
  </div>

  <!-- Article 2 -->
  <div class="col-lg-3 col-md-6">
    <div class="card article-card h-100 p-3 bg-white">
      <a href="#" class="text-decoration-none text-dark">
        <img src="https://thumbs.dreamstime.com/z/adventure-sport-extreme-mountain-bike-athlete-man-riding-outdoors-lifestyle-trail-30470085.jpg?ct=jpeg" class="w-100 mb-3 article-img">

        <div class="d-flex justify-content-between small mb-2">
          <div class="text-muted">๐ ฒต ุงุฑุฏุจูุดุช ฑดฐต</div>
          <div class="text-primary">ุณุณุชูโุนุงูู</div>
        </div>

        <h6 class="fw-bold">ููู Per User ุฏุฑ ุณุณุชูโูุง ููุฒูุงู</h6>

        <div class="text-muted small mb-3">
          ูพุงุฏูโุณุงุฒ ููู ุณุทุญ ฺฉุงุฑุจุฑ ุฏุฑ ุจุฑูุงููโูุง ฺูุฏูุฎ ู ุฌููฺฏุฑ ุงุฒ race condition.
        </div>

        <hr>

        <div class="d-flex justify-content-between align-items-center">
          <div class="text-muted small">โฑ ธ ุฏููู</div>
          <span class="badge bg-info rounded-pill px-3 py-2">ูุทุงูุนู</span>
        </div>
      </a>
    </div>
  </div>

  <!-- Article 3 -->
  <div class="col-lg-3 col-md-6">
    <div class="card article-card h-100 p-3 bg-white">
      <a href="#" class="text-decoration-none text-dark">
        <img src="https://thumbs.dreamstime.com/z/indoor-bycicle-cycling-gym-16587500.jpg?ct=jpeg" class="w-100 mb-3 article-img">

        <div class="d-flex justify-content-between small mb-2">
          <div class="text-muted">๐ ต ุฎุฑุฏุงุฏ ฑดฐต</div>
          <div class="text-danger">Backend</div>
        </div>

        <h6 class="fw-bold">ููุงุณู REST ู GraphQL</h6>

        <div class="text-muted small mb-3">
          ุจุฑุฑุณ ูุนูุงุฑ REST ุฏุฑ ููุงุจู GraphQL ู ุงูุชุฎุงุจ ููุงุณุจ ุจุฑุง ูพุฑูฺูโูุง ููุงุณโูพุฐุฑ.
        </div>

        <hr>

        <div class="d-flex justify-content-between align-items-center">
          <div class="text-muted small">โฑ ฑต ุฏููู</div>
          <span class="badge bg-info rounded-pill px-3 py-2">ูุทุงูุนู</span>
        </div>
      </a>
    </div>
  </div>

  <!-- Article 4 -->
  <div class="col-lg-3 col-md-6">
    <div class="card article-card h-100 p-3 bg-white">
      <a href="#" class="text-decoration-none text-dark">
        <img src="https://thumbs.dreamstime.com/z/bmx-biker-27951084.jpg?ct=jpeg" class="w-100 mb-3 article-img">

        <div class="d-flex justify-content-between small mb-2">
          <div class="text-muted">๐ ฑธ ุฎุฑุฏุงุฏ ฑดฐต</div>
          <div class="text-warning">ฺฉุงููพุงูุฑ</div>
        </div>

        <h6 class="fw-bold">ูุฑุงุญู ุณุงุฎุช ฺฉ ฺฉุงููพุงูุฑ ุณุงุฏู</h6>

        <div class="text-muted small mb-3">
          ุงุฒ Lexer ู Parser ุชุง ุชููุฏ ฺฉุฏ ููุงุ ูุณุฑ ฺฉุงูู ุณุงุฎุช ฺฉ ฺฉุงููพุงูุฑ ฺฉูฺฺฉ.
        </div>

        <hr>

        <div class="d-flex justify-content-between align-items-center">
          <div class="text-muted small">โฑ ฒฐ ุฏููู</div>
          <span class="badge bg-info rounded-pill px-3 py-2">ูุทุงูุนู</span>
        </div>
      </a>
    </div>
  </div>

</div>
</section>

<!-- ================= Features Section ================= -->
<section class="py-5">
  <div class="container">
    <h2 class="section-title mb-5 fw-bold">ฺุฑุง ูุงุ</h2>

    <div class="row g-4">
      <div class="col-md-4">
        <div class="card feature-card text-center p-4 border-0 shadow-sm">
          <h5 class="fw-bold mt-3">ุขููุฒุด ูพุฑูฺู ูุญูุฑ</h5>
          <p class="text-muted small">
            ุงุฏฺฏุฑ ูุงูุน ุจุง ุงูุฌุงู ูพุฑูฺูโูุง ฺฉุงุฑุจุฑุฏ
          </p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card feature-card text-center p-4 border-0 shadow-sm">
          <h5 class="fw-bold mt-3">ูพุดุชุจุงู ุฏุงุฆู</h5>
          <p class="text-muted small">
            ุฏุฑ ุทูู ูุณุฑ ุชููุง ูุณุชุ ููุดู ฺฉูุงุฑุช ูุณุชู
          </p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card feature-card text-center p-4 border-0 shadow-sm">
          <h5 class="fw-bold mt-3">ุฏุณุชุฑุณ ููุดฺฏ</h5>
          <p class="text-muted small">ูุฑ ุฒูุงู ู ูุฑ ุฌุง ุจู ุฏูุฑูโูุง ุฏุณุชุฑุณ ุฏุงุฑ</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock main %}

{% block script %} 
<script type="text/javascript">
  const autocompleteUrl = "{% url 'courses:course-autocomplete' %}";

  const input = document.querySelector('.searchBox');
  const suggestionsBox = document.getElementById('suggestions');

  let timeout; // ูุชุบุฑ ูฺฏูุฏุงุฑูุฏู ุชุงูุฑ

  input.addEventListener('input', function() {
    clearTimeout(timeout); // ูพุงฺฉ ฺฉุฑุฏู ุชุงูุฑ ูุจู

    const value = this.value.trim();
    suggestionsBox.innerHTML = '';

    if (!value) {
      suggestionsBox.style.display = 'none'; // ูพููุงู ฺฉุฑุฏู ุฌุนุจู ูพุดููุงุฏุงุช
      return;
    }

    // ุชูุธู ุชุงูุฑ ุจุฑุง ุชุงุฎุฑ ุฏุฑ ุงุฑุณุงู ุฏุฑุฎูุงุณุช
    timeout = setTimeout(() => {
      // ุฏุฑุฎูุงุณุช ุจู ุณุฑูุฑ ุจุฑุง ฺฏุฑูุชู ูพุดููุงุฏุงุช
      fetch(`${autocompleteUrl}?query=${encodeURIComponent(value)}`) 
        .then(response => {
          if (!response.ok) { 
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          if (data.results.length > 0) {
            data.results.forEach(item => {
              const div = document.createElement('div');
              div.classList.add('autocomplete-suggestion');
              div.textContent = item.text; // ููุงุด ูุชู
              div.addEventListener('click', function() {
                input.value = item.text; // ูพุฑ ฺฉุฑุฏู ูุฑูุฏ ุจุง ูพุดููุงุฏ ุงูุชุฎุงุจ ุดุฏู
                suggestionsBox.innerHTML = '';
                suggestionsBox.style.display = 'none'; // ูพููุงู ฺฉุฑุฏู ุฌุนุจู ูพุดููุงุฏุงุช
              });
              suggestionsBox.appendChild(div);
            });
            suggestionsBox.style.display = 'block'; // ููุงุด ุฌุนุจู ูพุดููุงุฏุงุช
          } else {
            suggestionsBox.style.display = 'none'; // ูพููุงู ฺฉุฑุฏู ุฏุฑ ุตูุฑุช ูุฏุงุดุชู ูพุดููุงุฏ
          }
        })
        .catch(error => {
          console.error('ุฎุทุง ุฏุฑ ุฏุฑุฎูุงุณุช:', error);
        });
    }, 1000); // ุฒูุงู ุชุงุฎุฑ (ุฏุฑ ูู ุซุงูู)
  });

  document.addEventListener('click', function(e) {
    if (!suggestionsBox.contains(e.target) && e.target !== input) {
      suggestionsBox.style.display = 'none';
    }
  });
</script>
{% endblock script %}